{% extends 'base.html' %}

{% block content %}
<div class="row justify-content-center">
    <div class="col-md-8">
        <h2 class="text-center mb-4">Shorten Your URL</h2>
        <form method="POST" class="p-4 border rounded shadow-sm bg-white">
            <div class="mb-3">
                <label for="long_url" class="form-label">Enter your URL:</label>
                <input type="url" id="long_url" name="long_url" class="form-control" placeholder="https://example.com" required>
            </div>
            <div class="d-grid">
                <button type="submit" class="btn btn-primary">Shorten URL</button>
            </div>
        </form>
        {% if short_url %}
        <div class="mt-4 p-4 border rounded shadow-sm bg-light">
            <p class="mb-1">Your shortened URL:</p>
            <h5>
                <a href="{{ url_for('redirect_to_long_url', short_id=short_url.split('/')[-1]) }}" target="_blank">
                    {{ request.url_root }}{{ short_url }}
                </a>
            </h5>
            <p class="mb-0">Original URL: {{ long_url }}</p>
            {% if qr_code_img %}
            <div class="mt-3">
                <p>Scan the QR code to access the shortened URL:</p>
                <img src="data:image/png;base64,{{ qr_code_img }}" alt="QR Code" class="img-fluid">
            </div>
            {% endif %}
        </div>
        {% endif %}
    </div>
</div>
{% endblock %}